{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\uCF54\\uB529\\\\\\uB9AC\\uC5D1\\uD2B8\\\\webrtc2\\\\client\\\\src\\\\components\\\\views\\\\LandingPage\\\\LandingPage.js\";\nimport React, { useEffect } from 'react'; // import axios from 'axios';\n\nfunction LandingPage(props) {\n  const localVideoref = React.createRef();\n  const remoteVideoref = React.createRef();\n  const pc_config = null;\n  var pc = new RTCPeerConnection(pc_config); // Similar to componentDidMount and componentDidUpdate:\n\n  useEffect(() => {\n    pc.onicecandidate = e => {\n      if (e.candidate) {\n        console.log(JSON.stringify(e.candidate));\n      }\n    };\n\n    pc.oniceconnectionstatechange = e => {\n      console.log(e);\n    };\n\n    pc.onaddstream = e => {\n      remoteVideoref.current.srcObject = e.stream;\n    };\n\n    const constraints = {\n      video: true\n    };\n\n    const success = stream => {\n      window.localStream = stream;\n      localVideoref.current.srcObject = stream;\n      pc.addStream(stream);\n    };\n\n    const failure = e => {\n      console.log('getUserMedia Errror: ', e);\n    };\n\n    navigator.mediaDevices.getUserMedia(constraints).then(success).catch(failure);\n  });\n\n  const createOffer = () => {\n    console.log('Offer');\n    pc.createOffer({\n      offerToReceiveVideo: 1\n    }).then(sdp => {\n      console.log(JSON.stringify(sdp));\n      pc.setLocalDescription(sdp);\n    }, e => {});\n  };\n\n  const setRemoteDescription = () => {\n    const desc = JSON.parse(textref.value);\n    pc.setRemoteDescription(new RTCSessionDescription(desc));\n  };\n\n  const createAnswer = () => {\n    console.log('Answer');\n    pc.createAnswer({\n      offerToReceiveVideo: 1\n    }).then;\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"video\", {\n    style: {\n      width: 240,\n      height: 240,\n      margin: 5,\n      backgroundColor: 'black'\n    },\n    ref: localVideoref,\n    autoPlay: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), React.createElement(\"video\", {\n    style: {\n      width: 240,\n      height: 240,\n      margin: 5,\n      backgroundColor: 'black'\n    },\n    ref: remoteVideoref,\n    autoPlay: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: createOffer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Offer\"), React.createElement(\"button\", {\n    onClick: createAnswer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Answer\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), React.createElement(\"textarea\", {\n    ref: ref => {\n      textref = ref;\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: setRemoteDescription,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Set Remote Desc\"), React.createElement(\"button\", {\n    onClick: addCandidate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Add Candidate\"));\n}\n\nexport default LandingPage;","map":{"version":3,"sources":["D:/코딩/리엑트/webrtc2/client/src/components/views/LandingPage/LandingPage.js"],"names":["React","useEffect","LandingPage","props","localVideoref","createRef","remoteVideoref","pc_config","pc","RTCPeerConnection","onicecandidate","e","candidate","console","log","JSON","stringify","oniceconnectionstatechange","onaddstream","current","srcObject","stream","constraints","video","success","window","localStream","addStream","failure","navigator","mediaDevices","getUserMedia","then","catch","createOffer","offerToReceiveVideo","sdp","setLocalDescription","setRemoteDescription","desc","parse","textref","value","RTCSessionDescription","createAnswer","width","height","margin","backgroundColor","ref","addCandidate"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\n// import axios from 'axios';\r\n\r\nfunction LandingPage(props) {\r\n    const localVideoref = React.createRef();\r\n    const remoteVideoref = React.createRef();\r\n    const pc_config = null;\r\n    var pc = new RTCPeerConnection(pc_config);\r\n\r\n    // Similar to componentDidMount and componentDidUpdate:\r\n    useEffect(() => { \r\n        pc.onicecandidate = (e) => {\r\n            if(e.candidate){\r\n                console.log(JSON.stringify(e.candidate));\r\n            }\r\n        }\r\n        pc.oniceconnectionstatechange = (e) => {\r\n            console.log(e);\r\n        }\r\n    \r\n        pc.onaddstream = (e) => {\r\n            remoteVideoref.current.srcObject = e.stream;\r\n        }\r\n\r\n        const constraints = {video: true};\r\n        const success = (stream) => {\r\n            window.localStream = stream;\r\n            localVideoref.current.srcObject = stream;\r\n            pc.addStream(stream);\r\n        }\r\n        const failure = (e) => {\r\n            console.log('getUserMedia Errror: ', e);\r\n        }\r\n\r\n        navigator.mediaDevices.getUserMedia(constraints)\r\n        .then( success )\r\n        .catch( failure );\r\n    }); \r\n\r\n    const createOffer = () => {\r\n        console.log('Offer');\r\n        pc.createOffer({offerToReceiveVideo: 1})\r\n        .then(sdp => {\r\n            console.log(JSON.stringify(sdp));\r\n            pc.setLocalDescription(sdp);\r\n        }, e => {});\r\n    }\r\n\r\n    const setRemoteDescription = () => {\r\n        const desc = JSON.parse(textref.value);\r\n        pc.setRemoteDescription(new RTCSessionDescription(desc));\r\n    }\r\n\r\n    const createAnswer = () => {\r\n        console.log('Answer');\r\n        pc.createAnswer({offerToReceiveVideo:1})\r\n        .then\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <video\r\n                style={{\r\n                    width:240, height:240,\r\n                    margin: 5, backgroundColor: 'black'\r\n                }} \r\n                ref={localVideoref} \r\n                autoPlay>\r\n            </video>\r\n            <video\r\n                style={{\r\n                    width:240, height:240,\r\n                    margin: 5, backgroundColor: 'black'\r\n                }} \r\n                ref={remoteVideoref} \r\n                autoPlay>\r\n            </video>\r\n\r\n            <br />\r\n            <button onClick={createOffer}>Offer</button>\r\n            <button onClick={createAnswer}>Answer</button>\r\n            <br />\r\n            <textarea ref={ref => {textref = ref}} />\r\n            <br />\r\n            <button onClick={setRemoteDescription}>Set Remote Desc</button>\r\n            <button onClick={addCandidate}>Add Candidate</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LandingPage;"]},"metadata":{},"sourceType":"module"}